# projects/mexican_cooking_bot/evaluation/metrics_definition.yaml
metrics:
  - name: agent_path
    description: "The primary logical path the agent took."
    type: derive_path
    paths:
      - name: recipe_path
        if_field_exists: shopping_list
      - name: clarification_path
        if_field_exists: clarification_question
      - name: unknown_path

  - name: ingredient_count_identified
    description: "Total number of ingredients the agent extracted from the user's request."
    type: count
    field: ingredients_list
  
  - name: more_than_3
    description: "Any ingredients which are more than $3"
    type: where(> 0.5)
    field: store_search_results.price


  - name: ingredient_find_rate_percent
    description: "% of identified ingredients that were successfully found."
    type: ratio
    numerator:
      type: distinct | count
      field: store_search_results.ingredient
    denominator:
      type: count
      field: ingredients_list
    options:
      format_as_percent: true
      on_zero_denominator: 100.0